<!-- this is for yeargaps -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>年代听众偏好分析</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <style>
    body {
      font-family: "微软雅黑", sans-serif;
      background-color: #f4f6f8;
      margin: 0;
    }
    header {
      background-color: #4a90e2;
      color: white;
      padding: 16px 24px;
      font-size: 20px;
    }
    .filters {
      padding: 16px;
      display: flex;
      gap: 16px;
      background: #fff;
      flex-wrap: wrap;
    }
    select {
      padding: 8px;
      border-radius: 6px;
    }
    .container {
      padding: 24px;
    }
    .chart-box {
      width: 100%;
      height: 500px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      margin-bottom: 24px;
      padding: 12px;
    }
  </style>
</head>
<body>
  <header>不同年代听众偏好类型分析</header>

  <div class="filters">
    <label>图表类型：<select id="chartType">
      <option value="bar">柱状图</option>
      <option value="radar">雷达图</option>
    </select></label>

    <label>偏好类型：<select id="preference">
      <option value="style">风格偏好</option>
      <option value="tempo">节奏快慢</option>
      <option value="language">语言类型</option>
    </select></label>

    <label>对比年代1：<select id="era1">
      <option>60后</option><option>70后</option><option>80后</option>
      <option selected>90后</option><option>00后</option>
    </select></label>
    <label>对比年代2：<select id="era2">
      <option selected>70后</option><option>80后</option><option>90后</option>
      <option>00后</option><option>10后</option>
    </select></label>
  </div>

  <div class="container">
    <div id="chart" class="chart-box"></div>
  </div>

  <script>
    const chart = echarts.init(document.getElementById('chart'));

    // 模拟数据结构：各年代对10类偏好的比例（风格/节奏/语言）
    const genres = ['流行', '摇滚', '电子', '说唱', '民谣', '古典', 'R&B', '爵士', '动漫', '其他'];
    const mockData = {
      style: {
        '70后': [20, 25, 5, 3, 15, 10, 5, 2, 0, 15],
        '90后': [25, 10, 15, 12, 10, 3, 5, 5, 10, 5]
      },
      tempo: {
        '70后': [30, 40, 30],  // 慢、中、快
        '90后': [15, 45, 40]
      },
      language: {
        '70后': [50, 20, 10, 20],
        '90后': [30, 30, 25, 15]
      }
    };

    const labels = {
      style: genres,
      tempo: ['慢节奏', '中等节奏', '快节奏'],
      language: ['国语', '英文', '日韩', '其他']
    };

    function updateChart() {
      const type = document.getElementById('chartType').value;
      const pref = document.getElementById('preference').value;
      const era1 = document.getElementById('era1').value;
      const era2 = document.getElementById('era2').value;
      const data1 = mockData[pref][era1];
      const data2 = mockData[pref][era2];
      const legend = [era1, era2];
      const xLabels = labels[pref];

      let option;
      if (type === 'bar') {
        option = {
          title: { text: `${era1} vs ${era2} - ${pref === 'style' ? '风格' : pref === 'tempo' ? '节奏' : '语言'}偏好对比`, left: 'center' },
          tooltip: {
            trigger: 'axis',
            axisPointer: { type: 'shadow' },
            formatter: params => {
              return params.map(p => `${p.seriesName}：${p.data}%`).join('<br/>');
            }
          },
          legend: { bottom: 10, data: legend },
          xAxis: { type: 'category', data: xLabels },
          yAxis: { type: 'value', max: 100 },
          series: [
            { name: era1, type: 'bar', data: data1 },
            { name: era2, type: 'bar', data: data2 }
          ]
        };
      } else {
        option = {
          title: { text: `${era1} vs ${era2} - ${pref === 'style' ? '风格' : pref === 'tempo' ? '节奏' : '语言'}偏好对比`, left: 'center' },
          tooltip: {
            trigger: 'item',
            formatter: p => `${p.seriesName}<br/>${p.name}：${p.value}%`
          },
          legend: { bottom: 10, data: legend },
          radar: {
            indicator: xLabels.map(label => ({ name: label, max: 100 })),
            radius: 120
          },
          series: [
            {
              name: '偏好对比',
              type: 'radar',
              data: [
                { value: data1, name: era1 },
                { value: data2, name: era2 }
              ]
            }
          ]
        };
      }

      chart.setOption(option);
    }

    document.querySelectorAll('select').forEach(el => {
      el.addEventListener('change', updateChart);
    });

    updateChart();
  </script>
</body>
</html>